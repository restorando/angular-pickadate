!function(e){"use strict";var t=[].indexOf||function(e){for(var t=0,a=this.length;a>t;t++)if(t in this&&this[t]===e)return t;return-1};e.module("pickadate",[]).provider("pickadateI18n",function(){var e={prev:"prev",next:"next"};this.translations={},this.$get=function(){var t=this.translations;return{t:function(a){return t[a]||e[a]}}}}).factory("pickadateUtils",["$locale",function(e){return{isDate:function(e){return"[object Date]"===Object.prototype.toString.call(e)},stringToDate:function(e){if(this.isDate(e))return new Date(e);var t=e.split("-"),a=t[0],n=t[1],r=t[2];return new Date(a,n-1,r,3)},buildDates:function(e,t){var a=[],n=new Date(e.getFullYear(),e.getMonth()+1,0,3);for(t=t||{},e=new Date(e);e.getDay()!==t.weekStartsOn;)e.setDate(e.getDate()-1);for(var r=0;42>r&&!(t.noExtraRows&&e.getDay()===t.weekStartsOn&&e>n);r++)a.push(new Date(e)),e.setDate(e.getDate()+1);return a},buildDayNames:function(t){var a=e.DATETIME_FORMATS.SHORTDAY;if(t){a=a.slice(0);for(var n=0;t>n;n++)a.push(a.shift())}return a}}}]).directive("pickadate",["$locale","$sce","pickadateUtils","pickadateI18n","dateFilter",function(a,n,r,i,s){return{require:"ngModel",scope:{date:"=ngModel",defaultDate:"=",minDate:"=",maxDate:"=",disabledDates:"=",weekStartsOn:"="},template:'<div class="pickadate"><div class="pickadate-header"><div class="pickadate-controls"><a href="" class="pickadate-prev" ng-click="changeMonth(-1)" ng-show="allowPrevMonth">'+n.trustAsHtml(i.t("prev"))+'</a><a href="" class="pickadate-next" ng-click="changeMonth(1)" ng-show="allowNextMonth">'+n.trustAsHtml(i.t("next"))+'</a></div><h3 class="pickadate-centered-heading">{{currentDate | date:"MMMM yyyy"}}</h3></div><div class="pickadate-body"><div class="pickadate-main"><ul class="pickadate-cell"><li class="pickadate-head" ng-repeat="dayName in dayNames">{{dayName}}</li></ul><ul class="pickadate-cell"><li ng-repeat="d in dates" ng-click="setDate(d)" ng-class="classesFor(d)">{{d.dateObj | date:"d"}}</li></ul></div></div></div>',link:function(a,n,i,c){function l(){var e=new Date(a.currentDate.getFullYear(),a.currentDate.getMonth(),1,3),t=e.getMonth()+1,n=r.buildDates(e,{weekStartsOn:k,noExtraRows:v}),i=[],c=s(new Date,"yyyy-MM-dd"),l=new Date(e);l.setMonth(t),a.allowPrevMonth=!p||e>p,a.allowNextMonth=!f||f>=l,a.dayNames=r.buildDayNames(k);for(var d=0;d<n.length;d++){var o=[],h=n[d],g=s(h,"yyyy-MM-dd"),w=D(g);o.push(u(h)||w?"pickadate-disabled":"pickadate-enabled"),w&&o.push("pickadate-unavailable"),g===c&&o.push("pickadate-today"),i.push({date:g,dateObj:h,classNames:o})}a.dates=i}function d(e){c.$setViewValue(g?e:e[0])}function o(e){for(var t=[],a=0;a<e.length;a++){var n=e[a];D(n)||u(r.stringToDate(n))||t.push(n)}return t}function u(e){return p>e||e>f||s(e,"M")!==s(a.currentDate,"M")}function D(e){return t.call(a.disabledDates||[],e)>=0}function h(e,a){var n=t.call(a,e);return-1===n?a.push(e):a.splice(n,1),a}var p,f,v=i.hasOwnProperty("noExtraRows"),g=i.hasOwnProperty("multiple"),k=a.weekStartsOn,w=[];a.currentDate=a.defaultDate&&r.stringToDate(a.defaultDate),(!e.isNumber(k)||0>k||k>6)&&(k=0),a.setDate=function(e){u(e.dateObj)||D(e.date)||(w=g?h(e.date,w):[e.date],d(w))},c.$render=function(){var t;e.isArray(c.$modelValue)?w=c.$modelValue:c.$modelValue&&(w=[c.$modelValue]),t=w[0]&&r.stringToDate(w[0]),a.currentDate=a.currentDate||t||new Date,p=a.minDate&&r.stringToDate(a.minDate)||new Date(0),f=a.maxDate&&r.stringToDate(a.maxDate)||new Date(99999999999999),w=o(w),d(w),l()},a.classesFor=function(e){var a=t.call(w,e.date)>=0?"pickadate-active":null;return e.classNames.concat(a)},a.changeMonth=function(e){a.currentDate.setDate(1),a.currentDate.setMonth(a.currentDate.getMonth()+e),l()},a.$watch(function(){return e.toJson([a.minDate,a.maxDate,a.disabledDates])},c.$render)}}}])}(window.angular);